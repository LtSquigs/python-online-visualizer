(function(){var k,l,p=[].indexOf||function(b){for(var a=0,e=this.length;a<e;a++)if(a in this&&this[a]===b)return a;return-1};self.JSREPLEngine=function(){function b(a,e,f,c,m,d){var b=this;this.result=f;this.error=c;this.Ruby=m.Ruby;m.print=function(){};this.error_buffer=[];this.Ruby.initialize(null,function(a){if(a!=null)return e(String.fromCharCode(a))},function(a){if(a!=null)return b.error_buffer.push(String.fromCharCode(a))});d()}b.name="JSREPLEngine";b.prototype.Eval=function(a){var e;this.error_buffer=
[];try{return e=this.Ruby.eval(a),this.result(this.Ruby.stringify(e))}catch(f){return typeof f!=="number"?this.error("Internal error: "+f):this.error_buffer.length?this.error(this.error_buffer.join("")):this.error("Unknown error.")}};b.prototype.RawEval=function(a){return this.Eval(a)};b.prototype.GetNextLineIndent=function(a){var e,f,c,b,d,g,h,n,o,i,j;c=f=e=g=b=0;i=a.split("\n");for(a=0,n=i.length;a<n;a++){d=i[a];c=0;j=d.match(l)||[];for(h=0,o=j.length;h<o;h++)if(d=j[h],p.call(k,d)>=0?(b++,c++):
d==="("?(g++,c++):d==="{"?(e++,c++):d==="["?(f++,c++):d==="end"?(b--,c--):d===")"?(g--,c--):d==="]"?(e--,c--):d==="}"&&(f--,c--),b<0||g<0||e<0||f<0)return false}return b>0||g>0||e>0||f>0?c>0?1:0:false};return b}();k="begin,module,def,class,if,unless,case,for,while,until,do".split(",");l=/\s+|\d+(?:\.\d*)?|"(?:[^"]|\\.)*"|'(?:[^']|\\.)*'|\/(?:[^\/]|\\.)*\/|[-+\/*]|[<>=]=?|:?[a-z@$][\w?!]*|[{}()\[\]]|[^\w\s]+/ig}).call(this);
