(function(){self.JSREPLEngine=function(){function a(b,g,d,c,a,f){this.result=d;this.error=c;this.sandbox=a;this.inspect=this.sandbox.console.inspect;this.functionClass=this.sandbox.Function;this.sandbox.__eval=this.sandbox.eval;this.tokenizer=this.sandbox.require("kaffeine/token");this.kaffeine=new (this.sandbox.require("kaffeine"));f()}a.name="JSREPLEngine";a.prototype.Compile=function(b){b=this.kaffeine.compile(b);try{new this.functionClass(b)}catch(a){b="("+b+")"}return b};a.prototype.Eval=function(b){var a,
d;try{a=this.Compile(b)}catch(c){c.message="Compiling: "+c.message;this.error(c);return}try{return d=this.sandbox.__eval(a),this.result(d===void 0?"":this.inspect(d))}catch(e){return this.error(e)}};a.prototype.EvalSync=function(b){return this.sandbox.__eval(this.Compile(b))};a.prototype.GetNextLineIndent=function(b){var a,d,c;try{for(c=this.tokenizer.ize(b);c!=null;){if(c.bang)return 0;c=c.next}}catch(e){return 1}try{a=this.kaffeine.compile(b);try{new this.functionClass(a)}catch(f){new this.functionClass("("+
a+")")}d=b.split("\n").slice(-1)[0];return/^\s+/.test(d)?0:false}catch(h){return/^\s*(for|while|if|else)\b|[\[\{\(]$/.test(b)?1:0}};return a}()}).call(this);
